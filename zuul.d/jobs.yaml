- job:
    name: nebulous-platform-apply-helm-charts
    parent: nebulous-apply-helm-charts
    dependencies:
      - name: opendev-buildset-registry
        soft: false
      - name: nebulous-activemq-build-container-images
        soft: true
      - name: nebulous-activemq-upload-container-images
        soft: true
      - name: nebulous-gui-build-container-images
        soft: true
      - name: nebulous-gui-upload-container-images
        soft: true
      - name: nebulous-influxdb-build-container-images
        soft: true
      - name: nebulous-influxdb-upload-container-images
        soft: true
      - name: nebulous-iot-dpp-orchestrator-build-container-images
        soft: true
      - name: nebulous-iot-dpp-orchestrator-upload-container-images
        soft: true
      - name: nebulous-optimiser-constraint-checker-build-container-images
        soft: true
      - name: nebulous-optimiser-constraint-checker-upload-container-images
        soft: true
      - name: nebulous-optimiser-controller-build-container-images
        soft: true
      - name: nebulous-optimiser-controller-upload-container-images
        soft: true
      - name: nebulous-optimiser-resource-auction-agent-build-container-images
        soft: true
      - name: nebulous-optimiser-resource-auction-agent-upload-container-images
        soft: true
      - name: nebulous-optimiser-solver-build-container-images
        soft: true
      - name: nebulous-optimiser-solver-upload-container-images
        soft: true
      - name: nebulous-optimiser-utility-evaluator-build-container-images
        soft: true
      - name: nebulous-optimiser-utility-evaluator-upload-container-images
        soft: true
      - name: nebulous-resource-manager-build-container-images
        soft: true
      - name: nebulous-resource-manager-upload-container-images
        soft: true
      - name: nebulous-slo-violation-detector-build-container-images
        soft: true
      - name: nebulous-slo-violation-detector-upload-container-images
        soft: true
    required-projects:
      - nebulous/activemq
      - nebulous/gui
      - nebulous/influxdb
      - nebulous/iot-dpp-orchestrator
      - nebulous/optimiser-constraint-checker
      - nebulous/optimiser-controller
      - nebulous/optimiser-resource-auction-agent
      - nebulous/optimiser-solver
      - nebulous/optimiser-utility-evaluator
      - nebulous/resource-manager
      - nebulous/slo-violation-detector
    requires:
      - nebulous-activemq-container-images
      - nebulous-gui-container-images
      - nebulous-influxdb-container-images
      - nebulous-iot-dpp-orchestrator-container-images
      - nebulous-optimiser-constraint-checker-container-images
      - nebulous-optimiser-controller-container-images
      - nebulous-optimiser-resource-auction-agent-container-images
      - nebulous-optimiser-solver-container-images
      - nebulous-optimiser-utility-evaluator-container-images
      - nebulous-resource-manager-container-images
      - nebulous-slo-violation-detector-container-images
    description: Deploy a Kubernetes cluster and apply charts.
    vars:
      helm_charts:
        nebulous-activemq: ../activemq/charts/nebulous-activemq
        nebulous-gui: ../gui/charts/nebulous-gui
        nebulous-influxdb: ../influxdb/charts/nebulous-influxdb
        nebulous-iot-dpp-orchestrator: ../iot-dpp-orchestrator/charts/nebulous-iot-dpp-orchestrator
        nebulous-optimiser-constraint-checker: ../optimiser-constraint-checker/charts/nebulous-optimiser-constraint-checker
        nebulous-optimiser-controller: ../optimiser-controller/charts/nebulous-optimiser-controller
        nebulous-optimiser-resource-auction-agent: ../optimiser-resource-auction-agent/charts/nebulous-optimiser-resource-auction-agent
        nebulous-optimiser-solver: ../optimiser-solver/charts/nebulous-optimiser-solver
        nebulous-optimiser-utility-evaluator: ../optimiser-utility-evaluator/charts/nebulous-optimiser-utility-evaluator
        nebulous-resource-manager: ../resource-manager/charts/nebulous-resource-manager
        nebulous-slo-violation-detector: ../slo-violation-detector/charts/nebulous-slo-violation-detector
